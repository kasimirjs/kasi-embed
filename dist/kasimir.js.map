{"version":3,"file":"kasimir.js","mappings":";;;;;;;;;;;;;;;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AAC0C;AACnC;AACP;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,iCAAiC,uDAAY;AAC7C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,YAAY;AACZ;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpCA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA,eAAe;AACf,YAAY;AACZ;AACO;AACP;AACA;AACA;AACA;AACA,wDAAwD,IAAI;AAC5D,gDAAgD,IAAI;AACpD;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;;AC1BA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;;;;;;;;;;;;;;AC1BA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACO;AACP;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACbA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AAC6C;AACK;AACb;AAC9B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iDAAO;AACjC;AACA;AACA;AACA;AACA;AACA,0BAA0B,8DAAa;AACvC,gCAAgC,qDAAU;AAC1C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;;;;;;;AC5CmD;AACL;AACY;AACb;;AAEtC;;AAEP;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,mCAAmC,wDAAc;AACjD;;AAEA,sBAAsB,iEAAa;;AAEnC;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA,6BAA6B,wDAAU;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wEAAiB;AAC1C;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;AC1FO;AACP;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACLkC;AACyB;;;AAGpD;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,2BAA2B,iDAAO;AAClC;AACA;AACA;;AAEA;AACA,4BAA4B;AAC5B;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,iDAAO;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0EAAoB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0EAAoB;AACvD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,iCAAiC,mCAAmC,iDAAO;AAC3E,wBAAwB,kDAAO,IAAI,QAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kCAAkC,iDAAO;;AAEzC;AACA;AACA;AACA;AACA,iCAAiC;AACjC,wBAAwB,iDAAO,IAAI,QAAQ;AAC3C;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,iCAAiC,mCAAmC,iDAAO;AAC3E,wBAAwB,kDAAO,IAAI,QAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,iCAAiC;AACjC,wBAAwB,kDAAO,IAAI,QAAQ;AAC3C;AACA;AACA,qBAAqB;AACrB;AACA,iCAAiC;AACjC,wBAAwB,kDAAO,IAAI,QAAQ;AAC3C;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,0EAAoB;AACjD;AACA;AACA;AACA,6BAA6B,0EAAoB;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC5QA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;AC1BO;AACP,wBAAwB;AACxB;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,gDAAgD,OAAO;AACvD,wDAAwD,OAAO;AAC/D;AACA,oBAAoB,QAAQ,aAAa,OAAO,GAAG;AACnD;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACO;AACP;AACA,sCAAsC,MAAM;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,YAAY;AACZ;AACO;AACP;AACA;;;;;;;;;;;;;;;;;;;ACZwC;AACI;AACF;AACc;;;AAGjD;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC,KAAK;AAC5C,+BAA+B,KAAK;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,KAAK;AACpD;AACA,wBAAwB,sDAAO;;AAE/B;AACA;AACA,6CAA6C,KAAK;AAClD;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0CAA0C;AAC3E;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,0DAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,wDAAQ;AACxB,8FAA8F,kEAAe;AAC7G,kCAAkC;AAClC,aAAa;AACb;AACA;;;AAGA;AACA,yBAAyB,sDAAO;AAChC;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,oCAAoC;AACjD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;ACpK0D;AACd;;;AAG5C;AACA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B,YAAY;AACZ;AACO;AACP;AACA,eAAe,wEAAiB;AAChC;AACA;AACA,kEAAkE,KAAK;AACvE;;AAEA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA,iFAAiF,GAAG;;AAEpF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,2DAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;UC9DA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;ACN6B;AACmB;AACJ;AACJ","sources":["webpack://@kasimirjs/embed/./src/ce/htmlFile.ts","webpack://@kasimirjs/embed/./src/ce/loadHtml.ts","webpack://@kasimirjs/embed/./src/core/dom-ready.ts","webpack://@kasimirjs/embed/./src/core/sleep.ts","webpack://@kasimirjs/embed/./src/decorators/custom-element.ts","webpack://@kasimirjs/embed/./src/element/KaHtmlElement.ts","webpack://@kasimirjs/embed/./src/ce/custom-element.js","webpack://@kasimirjs/embed/./src/ce/html.js","webpack://@kasimirjs/embed/./src/core/apply.js","webpack://@kasimirjs/embed/./src/core/elwalk.js","webpack://@kasimirjs/embed/./src/core/eval.js","webpack://@kasimirjs/embed/./src/core/query-select.js","webpack://@kasimirjs/embed/./src/core/str-to-camelcase.js","webpack://@kasimirjs/embed/./src/tpl/template.js","webpack://@kasimirjs/embed/./src/tpl/templatify.js","webpack://@kasimirjs/embed/webpack/bootstrap","webpack://@kasimirjs/embed/webpack/runtime/define property getters","webpack://@kasimirjs/embed/webpack/runtime/hasOwnProperty shorthand","webpack://@kasimirjs/embed/webpack/runtime/make namespace object","webpack://@kasimirjs/embed/./src/index.ts"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ka_load_html } from \"./loadHtml\";\nexport class RemoteTemplate {\n    constructor(url) {\n        this.url = url;\n        this.tpl = null;\n    }\n    /**\n     *\n     * @return {Promise<HTMLTemplateElement>}\n     */\n    load() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.tpl === null)\n                this.tpl = yield ka_load_html(this.url);\n            return this.tpl;\n        });\n    }\n}\n/**\n * Load the Template on usage from remote location\n *\n *\n * @param url {string}\n * @return {RemoteTemplate}\n */\nfunction htmlUrl(url) {\n    return new RemoteTemplate(url);\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n *\n * @param url {string}\n * @return {Promise<HTMLTemplateElement>}\n */\nexport function ka_load_html(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let e = document.createElement(\"template\");\n        let result = yield fetch(url);\n        if (!result.ok) {\n            console.error(`[loadHtml] failed to load '${url}'`);\n            throw `[loadHtml] failed to load '${url}'`;\n        }\n        let body = yield result.text();\n        e.innerHTML = body;\n        return e;\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n * Wait for DomContentLoaded or resolve immediate\n *\n * <example>\n * await MicxToolsVx.domReady();\n * </example>\n *\n * @return {Promise<string>}\n */\nexport function ka_dom_ready() {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve) => {\n            if (document.readyState === \"complete\" || document.readyState === \"interactive\")\n                return resolve(\"loaded\");\n            document.addEventListener(\"DOMContentLoaded\", () => resolve('DOMContentLoaded'));\n        });\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function ka_sleep(sleepms) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve) => {\n            window.setTimeout(() => {\n                return resolve();\n            }, sleepms);\n        });\n    });\n}\n","/**\n * Defines a customElement\n *\n * Usage as class decorator @customElement(\"some-tag\")\n *\n * @param tagName\n */\nexport function customElement(tagName) {\n    return function (classOrDescriptor) {\n        console.debug(\"registering custom element\", classOrDescriptor, tagName);\n        customElements.define(tagName, classOrDescriptor);\n        return classOrDescriptor;\n    };\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { KaTemplate } from \"../tpl/template\";\nimport { ka_templatify } from \"../tpl/templatify\";\nimport { ka_html } from \"../ce/html\";\nexport class KaHtmlElement extends HTMLElement {\n    constructor(shadowRootInit = null) {\n        super();\n        this.shadowRootInit = shadowRootInit;\n        this.addEventListener(\"load\", (e) => console.log(e));\n    }\n    connectedCallback() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let htmlTpl;\n            if (typeof this.html === \"function\") {\n                let fn = this.html;\n                htmlTpl = yield fn(this);\n            }\n            if (typeof htmlTpl === \"string\")\n                htmlTpl = ka_html(htmlTpl);\n            let attachTo = this;\n            if (this.shadowRootInit !== null) {\n                attachTo = this.attachShadow(this.shadowRootInit);\n            }\n            if (this.html !== null) {\n                let tpl = ka_templatify(htmlTpl);\n                this.$tpl = new KaTemplate(tpl);\n                attachTo.appendChild(tpl);\n            }\n            this.connected();\n        });\n    }\n    disconnectedCallback() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.disconnected();\n        });\n    }\n}\n","import {ka_templatify} from \"../tpl/templatify.js\";\nimport {KaTemplate} from \"../tpl/template.js\";\nimport {ka_query_selector} from \"../core/query-select.js\";\nimport {RemoteTemplate} from \"./htmlFile.ts\";\n\nexport class KaCustomElement extends HTMLElement {\n\n    constructor(props) {\n        super(props);\n\n        /**\n         *\n         * @protected\n         * @var {KaTemplate}\n         */\n        this.__tpl = null;\n\n        this.__isConnected = false;\n    }\n\n    /**\n     * The Template associated with this Element\n     *\n     * @return {KaTemplate}\n     */\n    get $tpl () {\n        return this.__tpl\n    }\n\n    isConnected() {\n        return this.isConnected;\n    }\n\n    /**\n     * @abstract\n     * @return {Promise<void>}\n     */\n    async connected($tpl, $this) {\n        console.warn(\"connected() method not overridden in\", this);\n    }\n\n    async connectedCallback() {\n        let callback = this.constructor.__callback;\n        if (callback === null) {\n        } else {\n            callback.bind(this);\n        }\n\n        if (this.constructor.__tpl !== null) {\n            let origTpl = this.constructor.__tpl;\n            if (origTpl instanceof RemoteTemplate)\n                origTpl = await origTpl.load();\n\n            let tpl = ka_templatify(origTpl);\n\n            if (this.constructor.__options.shadowDom === true) {\n                let shadowDom = this.attachShadow(this.constructor.__options.shadowDomOptions);\n                shadowDom.appendChild(tpl);\n            } else {\n                this.appendChild(tpl);\n            }\n\n            this.__tpl = new KaTemplate(tpl);\n        }\n\n        if (this.constructor.__options.waitEvent !== null) {\n            let wd = this.constructor.__options.waitEvent.split(\"@\");\n            let eventName = wd[0];\n            let target = document;\n            if (wd.length === 2) {\n                target = ka_query_selector(wd[1]);\n            }\n            target.addEventListener(eventName, async (event) => {\n                callback(this.$tpl, this);\n                this.__isConnected = true;\n            })\n            return;\n        }\n\n        if (callback === null) {\n            // Class: Call connected() Method\n            await this.connected(this.$tpl, this);\n            this.__isConnected = true;\n            return\n        }\n\n        // Function\n        callback(this.$tpl, this);\n        this.__isConnected = true;\n    }\n\n};\n","\nexport function ka_html(htmlContent) {\n    let e = document.createElement(\"template\");\n    e.innerHTML = htmlContent;\n    return e;\n}\n","import {ka_eval} from \"./eval.js\";\nimport {ka_str_to_camel_case} from \"./str-to-camelcase.js\";\n\n\nexport function ka_apply (selector, scope, recursive=false) {\n    if (typeof selector === \"string\")\n        selector = KaToolsV1.querySelector(selector);\n\n    let attMap = {\n        \"textcontent\": \"textContent\",\n        \"htmlcontent\": \"innerHTML\",\n        \"innerhtml\": \"innerHTML\",\n    }\n\n    for(let attName of selector.getAttributeNames()) {\n        //console.log(attName);\n        if ( ! attName.startsWith(\"ka.\")) {\n            continue;\n        }\n\n        let attVal = selector.getAttribute(attName);\n\n        let attType = attName.split(\".\")[1];\n        let attSelector = attName.split(\".\")[2];\n        if (typeof attSelector === \"undefined\")\n            attSelector = null;\n\n\n        let registerEventHandler = function(element, action, callbackOrCode, scope) {\n            if (typeof element._ka_on === \"undefined\")\n                element._ka_on = {};\n\n            if (typeof element._ka_on[action] === \"undefined\")\n                element.addEventListener(action, (e) => element._ka_on[action](e));\n\n            element._ka_on[action] = async(e) => {\n                scope[\"$event\"] = e;\n                if (typeof callbackOrCode === \"function\") {\n                    return callbackOrCode(e, element, scope);\n                } else {\n                    return ka_eval(callbackOrCode, scope, element);\n                }\n            };\n        }\n\n        if (attType === \"on\") {\n            let attScope = {$scope: scope, ...scope}\n            if (attSelector !== null) {\n                registerEventHandler(selector, attSelector, attVal, attScope);\n            } else {\n                let callBackMap = KaToolsV1.eval(attVal, attScope, selector);\n                for(let curAction in callBackMap) {\n                    registerEventHandler(selector, curAction, callBackMap[curAction], attScope);\n                }\n\n            }\n            continue;\n        }\n\n        let r = null;\n        if (typeof attVal !== \"undefined\" && typeof attVal !== null && attVal !== \"\")\n            r = ka_eval(attVal, scope, selector);\n\n        switch (attType) {\n            case \"ref\":\n                if (typeof scope.$ref === \"undefined\")\n                    scope.$ref = {};\n                // Allow ref without parameter to use $ref.$last\n                if (r !== null)\n                    scope.$ref[r] = selector;\n                scope.$ref.$last = selector;\n                break;\n\n            case \"classlist\":\n                if (attSelector  !== null) {\n                    if (r === true) {\n                        selector.classList.add(attSelector)\n                    } else {\n                        selector.classList.remove(attSelector)\n                    }\n                    break;\n                }\n                for (let cname in r) {\n                    if (r[cname] === true) {\n                        selector.classList.add(cname);\n                    } else {\n                        selector.classList.remove(cname);\n                    }\n                }\n                break;\n\n            case \"style\":\n                if (attSelector  !== null) {\n                    let val = r;\n                    if (typeof val === \"number\" && [\"left\", \"top\", \"height\", \"width\", \"bottom\", \"right\", \"line-height\", \"font-size\"].indexOf(attSelector) !== -1)\n                        val = val + \"px\";\n                    selector.style[ka_str_to_camel_case(attSelector)] = val;\n                    break;\n                }\n                for (let cname in r) {\n                    let val = r[cname];\n                    if (typeof val === \"number\" && [\"left\", \"top\", \"height\", \"width\", \"bottom\", \"right\", \"line-height\", \"font-size\"].indexOf(cname) !== -1)\n                        val = val + \"px\";\n                    selector.style[ka_str_to_camel_case(cname)] = val;\n                }\n                break;\n\n            case \"bindarray\":\n                if (attSelector === \"default\")\n                    continue;\n                if (typeof r === \"undefined\") {\n                    // Bind default values\n                    if (selector.hasAttribute(\"ka.bind.default\")) {\n                        scope = {$scope: scope, ...scope};\n                        scope = {$scope: scope, ...scope, __curVal: ka_eval(selector.getAttribute(\"ka.bind.default\"), scope, selector)}\n                        ka_eval(`${attVal} = __curVal`, scope, selector);\n                        r = scope.__curVal;\n                    }\n                }\n                if ( ! Array.isArray(r)) {\n                    console.error(\"kap:bindarr: Not an array!\", r, selector);\n                    return;\n                }\n                if (r.indexOf(selector.value) === -1)\n                    selector.checked = false;\n                else\n                    selector.checked = true;\n\n                if (typeof selector._kap_bind === \"undefined\") {\n                    selector.addEventListener(\"change\", (event) => {\n\n                        let arr = ka_eval(attVal, scope, selector);\n\n                        if (arr.indexOf(selector.value) === -1 && selector.checked)\n                            arr.push(selector.value);\n                        if (arr.indexOf(selector.value) !== -1 && ! selector.checked)\n                            arr = arr.filter((e) => e !== selector.value);\n                        scope = {$scope: scope, ...scope, __curVal: arr};\n                        ka_eval(`${attVal} = __curVal`, scope, selector);\n                        if (scope.$on && scope.$on.change)\n                            scope.$on.change(event);\n                    })\n                    selector._kap_bind = true;\n                }\n                break;\n\n            case \"bind\":\n                if (attSelector === \"default\")\n                    continue;\n                if (typeof r === \"undefined\") {\n                    // Bind default values\n                    if (selector.hasAttribute(\"ka.bind.default\")) {\n                        scope = {$scope: scope, ...scope};\n                        scope = {$scope: scope, ...scope, __curVal: ka_eval(selector.getAttribute(\"ka.bind.default\"), scope, selector)}\n                        ka_eval(`${attVal} = __curVal`, scope, selector);\n                        r = scope.__curVal;\n                    }\n                }\n                if (selector.type === \"checkbox\" || selector.type === \"radio\") {\n                    if (selector.hasAttribute(\"value\")) {\n                        if (r === selector.getAttribute(\"value\"))\n                            selector.checked = true;\n                        else\n                            selector.checked = false;\n                    } else {\n                        if (r === true)\n                            selector.checked = true;\n                        else\n                            selector.checked = false;\n                    }\n                } else {\n                    selector.value = typeof r !== \"undefined\" ? r : \"\";\n                }\n\n                if (typeof selector._kap_bind === \"undefined\") {\n                    selector.addEventListener(\"change\", (event) => {\n\n                        let value = null;\n                        if (selector.type === \"checkbox\" || selector.type === \"radio\") {\n                            if (selector.hasAttribute(\"value\")) {\n                                if (selector.checked === false)\n                                    return;\n                                value = selector.getAttribute(\"value\");\n                            } else {\n                                value = selector.checked\n                            }\n                        } else {\n                            value = selector.value\n                        }\n                        scope = {$scope: scope, ...scope, __curVal: value}\n                        ka_eval(`${attVal} = __curVal`, scope, selector);\n                        if (scope.$on && scope.$on.change)\n                            scope.$on.change(event);\n                    })\n                    selector.addEventListener(\"keyup\", (event) => {\n                        scope = {$scope: scope,...scope, __curVal: selector.value}\n                        ka_eval(`${attVal} = __curVal`, scope, selector);\n                        if (scope.$on && scope.$on.change)\n                            scope.$on.change(event);\n\n                    })\n                    selector._kap_bind = true;\n                }\n                break;\n\n            case \"options\":\n                let value = selector.value;\n                selector.innerHTML = \"\";\n                for (let option in r) {\n                    if (isNaN(option)) {\n                        selector.appendChild(new Option(r[option], option));\n                    } else {\n                        if (typeof r[option].text !== \"undefined\") {\n                            selector.appendChild(new Option(r[option].text, r[option].value));\n                        } else {\n                            selector.appendChild(new Option(r[option], r[option]));\n                        }\n                    }\n                }\n                if (value !== null)\n                    selector.value = value;\n                break;\n\n            case \"attr\":\n                if (attSelector  !== null) {\n                    if (r === null || r === false) {\n                        selector.removeAttribute(attSelector)\n                    } else {\n                        selector.setAttribute(attSelector, r);\n                    }\n                    break;\n                }\n                for (let cname in r) {\n                    if (r[cname] ===null || r[cname] === false) {\n                        selector.removeAttribute(cname);\n                    } else {\n                        selector.setAttribute(cname, r[cname]);\n                    }\n                }\n                break;\n\n            case \"prop\":\n                if (attSelector  !== null) {\n                    // Set Property directly\n                    selector[ka_str_to_camel_case(attSelector)] = r;\n                    break;\n                }\n                for (let cname in r) {\n                    selector[ka_str_to_camel_case(cname)] = r[cname];\n                }\n                break;\n\n            default:\n                if (typeof attMap[attType] !== \"undefined\")\n                    attType = attMap[attType];\n                if (typeof selector[attType] === \"undefined\") {\n                    console.warn(\"apply(): trying to set undefined property \", attType, \"on element\", selector);\n                }\n                selector[attType] = r;\n                break;\n        }\n\n\n\n    }\n    if (recursive) {\n        for (let e of selector.children) {\n            ka_apply(e, scope, recursive);\n        }\n    }\n}\n","\n\n/**\n *\n * @param {HTMLElement} elem\n * @param fn\n * @param recursive\n */\nexport function ka_elwalk (elem, fn, recursive=false, includeFirst=false) {\n    if (Array.isArray(elem))\n        elem.children = elem;\n    if (typeof elem.children === \"undefined\")\n        return;\n    if (includeFirst && elem instanceof HTMLElement) {\n        let ret = fn(elem);\n        if (ret === false)\n            return false;\n    }\n    for(let child of elem.children) {\n        let ret = fn(child);\n        if (ret === false)\n            continue; // No recursiion\n\n        if (recursive && typeof child.children !== \"undefined\")\n            ka_elwalk(child, fn, recursive);\n\n    }\n}\n","\nexport function ka_eval (stmt, __scope, e, __refs) {\n    if (stmt.endsWith(\";\"))\n        stmt = stmt.slice(0, -1);\n\n    const reserved = [\"var\", \"null\", \"let\", \"const\", \"function\", \"class\", \"in\", \"of\", \"for\", \"true\", \"false\", \"await\", \"$this\"];\n    let r = \"var $this = e;\";\n    for (let __name in __scope) {\n        if (reserved.indexOf(__name) !== -1)\n            continue;\n        if (__name.indexOf(\"-\") !== -1) {\n            console.error(`Invalid scope key '${__name}': Cannot contain - in scope:`, __scope);\n            throw `eval() failed: Invalid scope key: '${__name}': Cannot contain minus char '-'`;\n        }\n        r += `var ${__name} = __scope['${__name}'];`\n    }\n    // If the scope was cloned, the original will be in $scope. This is important when\n    // Using events [on.click], e.g.\n    if (typeof __scope.$scope === \"undefined\") {\n        r += \"var $scope = __scope;\";\n    }\n    try {\n        // console.log(r + '(' + stmt + ')');\n        return eval(r  + '('+stmt+')')\n    } catch (ex) {\n        console.error(\"cannot eval() stmt: '\" + stmt + \"': \" + ex, \" on element \", e, ex, \"(context:\", __scope, \")\");\n        throw \"eval('\" + stmt + \"') failed: \" + ex;\n    }\n}\n","\n/**\n * Query a Element or trigger an Exception\n *\n * @param query\n * @param parent\n * @param exception\n * @return {HTMLElement}\n */\nexport function ka_query_selector (query, parent, exception) {\n    if (typeof exception === \"undefined\")\n        exception = `querySelector '${query}' not found`\n    if (typeof parent === \"undefined\" || parent === null)\n        parent = document;\n    let e = parent.querySelectorAll(query);\n    if (e.length === 0) {\n        console.warn(exception, \"on parent: \", parent);\n        throw exception;\n    }\n    return e[0];\n}\n","\n\n/**\n * Transform any input to CamelCase\n *\n * Example: some-class => someClass\n *\n * @param str {string}\n * @return {string}\n */\nexport function ka_str_to_camel_case (str) {\n    return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (ltr, idx) => idx === 0 ? ltr.toLowerCase() : ltr.toUpperCase()).replace(/[^a-zA-Z0-9]+/g, '');\n}\n","import {ka_eval} from \"../core/eval.js\";\nimport {ka_elwalk} from \"../core/elwalk.js\";\nimport {ka_apply} from \"../core/apply.js\";\nimport {KaCustomElement} from \"../ce/custom-element.js\";\n\n\nexport class KaTemplate {\n\n    constructor(template) {\n        this.template = template;\n        if (typeof this.template.__kachilds === \"undefined\")\n            this.template.__kachilds = [];\n        if (typeof this.template.__kasibling === \"undefined\")\n            this.template.__kasibling = this.template.nextElementSibling;\n\n        this.__renderCount = 0;\n        this.$scope = {};\n    }\n\n    _error(msg) {\n        console.error(`[ka-template] ${msg} on element`, this.template);\n        throw `[ka-template] ${msg} on element` + this.template;\n    }\n\n    _appendTemplate() {\n        let elements = this.template.content;\n\n        let elList = [];\n        for (let curE of elements.children) {\n            curE = curE.cloneNode(true);\n            curE._ka_maintained_by = this.template.getAttribute(\"_kaidx\");\n            elList.push(curE);\n            this.template.parentNode.insertBefore(curE, this.template.__kasibling);\n        }\n        this.template.__kachilds.push(elList);\n    }\n\n    _removeLastChild() {\n        if (this.template.__kachilds.length === 0)\n            return;\n        let childs = this.template.__kachilds[this.template.__kachilds.length - 1];\n        for (let curE of childs) {\n            this.template.parentElement.removeChild(curE);\n        }\n        this.template.__kachilds.length = this.template.__kachilds.length - 1;\n\n    }\n\n    _renderFor($scope, stmt) {\n        //console.log(\"kachilds\", this.template.__kachilds);\n        let matches = stmt.match(/^(let)?\\s*(?<target>.+)\\s+(?<type>of|in|repeat)\\s+(?<select>.+)$/);\n        if (matches === null) {\n            this._error(`Can't parse ka.for='${stmt}'`);\n        }\n        let selectVal = ka_eval(matches.groups.select, $scope, this.template);\n\n        if (matches.groups.type === \"repeat\") {\n            if (typeof selectVal !== \"number\")\n                this._error(`Error ka.for='${stmt}': Selected val must be number in repeat loop`);\n            selectVal = new Array(selectVal).fill(null);\n        }\n\n        let eIndex = 0;\n        for (let index in selectVal) {\n            let curScope = {$scope: $scope, ...$scope};\n            curScope[matches.groups.target] = index;\n\n            if (matches.groups.type === \"of\")\n                curScope[matches.groups.target] = selectVal[index];\n\n            if (this.template.__kachilds.length < eIndex + 1) {\n                //console.log(\"append\", eIndex, this.template.__kachilds.length);\n                this._appendTemplate();\n            }\n            this._maintain(curScope, this.template.__kachilds[eIndex], eIndex);\n            eIndex++;\n        }\n        for(let remIdx = eIndex; remIdx < this.template.__kachilds.length; ) {\n            this._removeLastChild();\n        }\n\n    }\n\n    _maintain($scope, childs, forIndex=0) {\n        for (let child of childs) {\n            child._ka_for_index = forIndex;\n            ka_elwalk(child, (el) => {\n                //console.log(\"walk\", el);\n                if (el instanceof HTMLTemplateElement) {\n                    //console.log(\"maintain\", el);\n                    let r = new this.constructor(el);\n                    r.render($scope);\n                    return false;\n                }\n\n                if (typeof el._ka_maintained_by !== \"undefined\" && el._ka_maintained_by !== this.template.getAttribute(\"_kaidx\")) {\n                    return false;\n                }\n\n                ka_apply(el, $scope);\n                if (el instanceof HTMLElement && (el.hasAttribute(\"ka.stop\") || el instanceof KaCustomElement))\n                    return false; // Skip Element rendering\n            }, true, true);\n        }\n    }\n\n\n    _renderIf($scope, stmt) {\n         let selectVal = ka_eval(stmt, $scope, this.template);\n        if (selectVal === true) {\n            if (this.template.__kachilds.length === 0)\n                this._appendTemplate();\n\n            this._maintain($scope, this.template.__kachilds[0]);\n        } else {\n            this._removeLastChild();\n        }\n    }\n\n    /**\n     * Remove all rendered element\n     */\n    dispose() {\n        for(;this.template.__kachilds.length > 0;)\n            this._removeLastChild();\n    }\n\n\n    /**\n     * Render / Update the Template\n     *\n     * Once the scope in parameter 1 was set, it will render\n     * without any parameters. Scope is available via property $scope\n     *\n     * @param $scope\n     */\n    render($scope = null) {\n        if ($scope === null)\n            $scope = this.$scope;\n        this.$scope = $scope;\n        this.__renderCount++;\n\n        if (this.template.hasAttribute(\"ka.for\")) {\n            this._renderFor($scope, this.template.getAttribute(\"ka.for\"));\n        } else if (this.template.hasAttribute(\"ka.if\")) {\n            this._renderIf($scope, this.template.getAttribute(\"ka.if\"));\n        } else {\n            if (typeof this.template._ka_active === \"undefined\") {\n                this._appendTemplate();\n                this.template._ka_active = true;\n            }\n            this._maintain($scope, this.template.__kachilds);\n        }\n    }\n\n    /**\n     * Return true if this template was renderd the first time\n     *\n     * @returns {boolean}\n     */\n    isFirstRender() {\n        return this.__renderCount === 1;\n    }\n\n};\n","import {ka_query_selector} from \"../core/query-select.js\";\nimport {ka_elwalk} from \"../core/elwalk.js\";\n\n\nwindow._ka_el_idx = 0;\n/**\n * Generate a renderable Template from <template> Element\n *\n * @param {HTMLElement|string} elem\n * @return {HTMLTemplateElement}\n */\nexport function ka_templatify (elem, returnMode=true) {\n    if (typeof elem === \"string\")\n        elem = ka_query_selector(elem);\n    if ( ! (elem instanceof Node)) {\n        console.error(\"[ka-templatify] Parameter 1 is not a html element: \", elem)\n        throw `[ka-templify] Parameter 1 is not a html element: ${elem}`;\n    }\n\n    if (returnMode) {\n        let returnTpl = document.createElement(\"template\");\n        returnTpl.setAttribute(\"_kaidx\", (window._ka_el_idx++).toString())\n        /* @var {HTMLTemplateElement} returnTpl */\n        returnTpl.innerHTML = elem.innerHTML\n            .replace(/\\[\\[(.*?)\\]\\]/g, (matches, m1) => `<span ka.textContent=\"${m1}\"></span>`);\n\n        ka_templatify(returnTpl.content, false);\n        return returnTpl;\n    }\n\n    if (elem instanceof HTMLTemplateElement)\n        elem = elem.content;\n\n    let wrapElem = (el, attName, attVal) => {\n        let tpl = document.createElement(\"template\");\n        tpl.setAttribute(\"_kaidx\", (window._ka_el_idx++).toString())\n        let clonedEl = el.cloneNode(true);\n        clonedEl.removeAttribute(attName);\n        tpl.content.append(clonedEl);\n        tpl.setAttribute(attName, attVal);\n        el.replaceWith(tpl);\n        return tpl;\n    }\n\n    ka_elwalk(elem, (el) => {\n        //console.log(el);\n        if ( ! el instanceof HTMLElement)\n            return;\n        let tpl = null;\n        for (let attrName of el.getAttributeNames()) {\n            if (attrName === \"ka.for\") {\n                tpl = wrapElem(el, \"ka.for\", el.getAttribute(\"ka.for\"));\n                ka_templatify(tpl, false);\n                break;\n            }\n            if (attrName === \"ka.if\") {\n                tpl = wrapElem(el, \"ka.if\", el.getAttribute(\"ka.if\"));\n                ka_templatify(tpl, false);\n                break;\n            }\n        }\n    }, true, false);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from \"./core/sleep\";\nexport { ka_dom_ready } from \"./core/dom-ready\";\nexport * from \"./decorators/custom-element\";\nexport * from \"./element/KaHtmlElement\";\n"],"names":[],"sourceRoot":""}